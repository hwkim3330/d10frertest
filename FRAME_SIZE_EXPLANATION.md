# RFC 2544 í”„ë ˆì„ í¬ê¸° ì„¤ëª…

## 1ï¸âƒ£ Ethernet í”„ë ˆì„ êµ¬ì¡° (í‘œì¤€)

### ì „ì²´ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Preamble (7B) + SFD (1B) = 8 bytes                             â”‚ â† Layer 1 (ë¬¼ë¦¬ ê³„ì¸µ)
â”‚                                                                 â”‚   ì¼ë°˜ì ìœ¼ë¡œ "í”„ë ˆì„ í¬ê¸°"ì— ë¯¸í¬í•¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Destination MAC Address        (6 bytes)                   â”‚ â”‚
â”‚ â”‚ Source MAC Address              (6 bytes)                   â”‚ â”‚
â”‚ â”‚ EtherType / Length              (2 bytes)                   â”‚ â”‚  â† Layer 2
â”‚ â”‚ Payload (Data)                  (46-1500 bytes)             â”‚ â”‚    ì´ ë¶€ë¶„ì´
â”‚ â”‚ Frame Check Sequence (FCS/CRC)  (4 bytes)                   â”‚ â”‚    "í”„ë ˆì„ í¬ê¸°"
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚                     = 64~1518 bytes                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Inter-Frame Gap (IFG)           (12 bytes)                      â”‚ â† Layer 1
â”‚                                                                 â”‚   í”„ë ˆì„ í¬ê¸°ì— ë¯¸í¬í•¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layer 2 í”„ë ˆì„ (64 bytes ìµœì†Œ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dest MAC     â”‚ Source MAC   â”‚ EtherType    â”‚ Payload      â”‚ FCS          â”‚
â”‚ (6 bytes)    â”‚ (6 bytes)    â”‚ (2 bytes)    â”‚ (46 bytes)   â”‚ (4 bytes)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    Total = 64 bytes (ìµœì†Œ Ethernet í”„ë ˆì„)
```

---

## 2ï¸âƒ£ RFC 2544ì—ì„œ "64 bytes"ì˜ ì˜ë¯¸

### RFC 2544 ì •ì˜
- **"64 bytes"** = **Layer 2 í”„ë ˆì„ í¬ê¸°**
- **í¬í•¨**: Dest MAC (6) + Src MAC (6) + EtherType (2) + Payload (46) + **FCS (4)**
- **ì œì™¸**: Preamble (8) + IFG (12)

### ê³„ì‚°
```
RFC 2544 "64 bytes" =
  6 (Dest MAC)
+ 6 (Src MAC)
+ 2 (EtherType)
+ 46 (Payload)  â† ìµœì†Œ Ethernet payload
+ 4 (FCS)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= 64 bytes
```

### âš ï¸ ì¤‘ìš”: FCSëŠ” í¬í•¨ë©ë‹ˆë‹¤!
- ë§ì€ ì‚¬ëŒë“¤ì´ í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤
- RFC 2544ì—ì„œ í”„ë ˆì„ í¬ê¸°ëŠ” **FCS í¬í•¨**ì…ë‹ˆë‹¤
- ë”°ë¼ì„œ **"64 bytes" = ì‹¤ì œ payloadëŠ” 46 bytes**ë§Œ ì „ì†¡ë¨

---

## 3ï¸âƒ£ FRER R-TAGê°€ ì¶”ê°€ë˜ë©´?

### R-TAG ì‚½ì… ìœ„ì¹˜
R-TAGëŠ” **Source MACê³¼ Original EtherType ì‚¬ì´**ì— ì‚½ì…ë©ë‹ˆë‹¤:

```
Standard 64B Frame (Non-FRER):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dest MAC     â”‚ Source MAC   â”‚ EtherType    â”‚ Payload      â”‚ FCS          â”‚
â”‚ (6 bytes)    â”‚ (6 bytes)    â”‚ (2 bytes)    â”‚ (46 bytes)   â”‚ (4 bytes)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    Total = 64 bytes


With R-TAG (FRER Enabled):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dest MAC     â”‚ Source MAC   â”‚ R-TAG ET     â”‚ Sequence #   â”‚ Original ET  â”‚ Payload      â”‚ FCS          â”‚
â”‚ (6 bytes)    â”‚ (6 bytes)    â”‚ (0xF1C1)     â”‚ (2 bytes)    â”‚ (2 bytes)    â”‚ (46 bytes)   â”‚ (4 bytes)    â”‚
â”‚              â”‚              â”‚ (2 bytes)    â”‚              â”‚              â”‚              â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    Total = 68 bytes (+4 bytes)
```

### ê³„ì‚°
```
FRER "64 bytes" í”„ë ˆì„ =
  6 (Dest MAC)
+ 6 (Src MAC)
+ 2 (R-TAG EtherType 0xF1C1)  â† ì¶”ê°€ë¨!
+ 2 (Sequence Number)          â† ì¶”ê°€ë¨!
+ 2 (Original EtherType)       â† ì›ë˜ ìˆë˜ ê²ƒ
+ 46 (Payload)                 â† ê·¸ëŒ€ë¡œ ìœ ì§€
+ 4 (FCS)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
= 68 bytes (+4 bytes ì¦ê°€!)
```

---

## 4ï¸âƒ£ ë‹µë³€ ìš”ì•½

### Q1: 64ë°”ì´íŠ¸ëŠ” ë°ì´í„°ë§Œ? ì•„ë‹ˆë©´ ì „ë¶€ í¬í•¨?
**A:** **ì „ë¶€ í¬í•¨**ì…ë‹ˆë‹¤!
- MAC ì£¼ì†Œ (12B) + EtherType (2B) + Payload (46B) + **FCS (4B)** = 64B
- ì‹¤ì œ "ë°ì´í„°" (Payload)ëŠ” **46 bytes**ë§Œ ë“¤ì–´ê°‘ë‹ˆë‹¤

### Q2: FRER R-TAG ì¶”ê°€í•˜ë©´ 68ë°”ì´íŠ¸?
**A:** **ë§ìŠµë‹ˆë‹¤!**
- Standard 64B â†’ FRER 68B (+4 bytes)
- Standard 128B â†’ FRER 132B (+4 bytes)
- Standard 1518B â†’ FRER 1522B (+4 bytes)

### Q3: ì˜¤ë²„í—¤ë“œ ê³„ì‚°
```
í”„ë ˆì„ í¬ê¸°ë³„ R-TAG ì˜¤ë²„í—¤ë“œ:

64B  â†’ 68B  :  4/68  = 5.88% ì¦ê°€
128B â†’ 132B :  4/132 = 3.03% ì¦ê°€
256B â†’ 260B :  4/260 = 1.54% ì¦ê°€
512B â†’ 516B :  4/516 = 0.78% ì¦ê°€
1024Bâ†’1028B:  4/1028= 0.39% ì¦ê°€
1280Bâ†’1284B:  4/1284= 0.31% ì¦ê°€
1518Bâ†’1522B:  4/1522= 0.26% ì¦ê°€
```

---

## 5ï¸âƒ£ ì‹¤ì œ RFC 2544 í…ŒìŠ¤íŠ¸ì—ì„œëŠ”?

### iperf3/scapy ì‚¬ìš© ì‹œ
ìš°ë¦¬ í…ŒìŠ¤íŠ¸ì—ì„œ "64 bytes"ë¥¼ ì§€ì •í•˜ë©´:

```python
# Python scapy ì˜ˆì‹œ
packet = Ether(dst=dst_mac, src=src_mac) / \
         IP(dst=dst_ip) / \
         UDP() / \
         Raw(load='X' * payload_size)
```

- `payload_size`ë¥¼ ì¡°ì •í•˜ì—¬ **ì „ì²´ L2 í”„ë ˆì„ì´ 64 bytes**ê°€ ë˜ë„ë¡ ì„¤ì •
- FCSëŠ” NICê°€ ìë™ìœ¼ë¡œ ì¶”ê°€
- ë”°ë¼ì„œ payloadëŠ” ì•½ **46 bytes** (IP/UDP í—¤ë” í¬í•¨)

### FRER í™œì„±í™” ì‹œ
- ìŠ¤ìœ„ì¹˜/NICê°€ ìë™ìœ¼ë¡œ **R-TAG 4 bytes ì‚½ì…**
- ìµœì¢… í”„ë ˆì„ í¬ê¸°: **68 bytes**
- **í”„ë¡œê·¸ë¨ì€ ì—¬ì „íˆ "64 bytes" ë³´ë‚¸ë‹¤ê³  ìƒê°**í•˜ì§€ë§Œ, ì‹¤ì œ wireì—ëŠ” 68 bytes ì „ì†¡

---

## 6ï¸âƒ£ ì´ê²ƒì´ ì„±ëŠ¥ì— ë¯¸ì¹˜ëŠ” ì˜í–¥

### ëŒ€ì—­í­ ê³„ì‚° (1 Gbps ë§í¬)
```
Non-FRER (64B):
- Frame: 64B + Preamble(8B) + IFG(12B) = 84B = 672 bits
- Max PPS: 1,000,000,000 / 672 = 1,488,095 pps
- Max Throughput: 1,488,095 * 64 * 8 = 762.04 Mbps

FRER (68B):
- Frame: 68B + Preamble(8B) + IFG(12B) = 88B = 704 bits
- Max PPS: 1,000,000,000 / 704 = 1,420,454 pps
- Max Throughput: 1,420,454 * 68 * 8 = 772.73 Mbps
```

### ì‹¤ì œ ì¸¡ì •ê°’ ë¹„êµ
| í”„ë ˆì„ | Non-FRER | FRER | ì°¨ì´ |
|--------|----------|------|------|
| 64B (ì‹¤ì œ 68B) | 23.44 Mbps | 24.41 Mbps | **+4.1%** |

ğŸ‘‰ **FRERì´ ì˜¤íˆë ¤ ë” ë¹ ë¥¸ ì´ìœ :**
- R-TAG 4ë°”ì´íŠ¸ ì¶”ê°€ë¡œ í”„ë ˆì„ì´ ì»¤ì§
- í•˜ì§€ë§Œ **í•˜ë“œì›¨ì–´ ì˜¤í”„ë¡œë“œ** ë•ë¶„ì— ì²˜ë¦¬ íš¨ìœ¨ ì¦ê°€
- **ê²½ë¡œ ìµœì í™”** íš¨ê³¼ (2ê°œ ê²½ë¡œ ì¤‘ ë¹ ë¥¸ ê²ƒ ì„ íƒ)

---

## 7ï¸âƒ£ ê²°ë¡ 

| í•­ëª© | ì„¤ëª… |
|------|------|
| **RFC 2544 "64 bytes"** | Layer 2 í”„ë ˆì„ ì „ì²´ (MAC + EtherType + Payload + **FCS í¬í•¨**) |
| **ì‹¤ì œ Payload** | 46 bytes (ìµœì†Œ Ethernet payload) |
| **Preamble/IFG** | í”„ë ˆì„ í¬ê¸°ì— **ë¯¸í¬í•¨** (20 bytes ì¶”ê°€) |
| **FRER R-TAG** | 4 bytes ì¶”ê°€ â†’ 64Bê°€ **68B**ë¡œ ì¦ê°€ |
| **ì˜¤ë²„í—¤ë“œ** | 64B: 5.88%, 1280B: 0.31% |
| **ì„±ëŠ¥ ì˜í–¥** | í•˜ë“œì›¨ì–´ ì˜¤í”„ë¡œë“œ ë•ë¶„ì— ì˜¤íˆë ¤ ì¼ë¶€ ê°œì„  |

---

**í•µì‹¬:**
- RFC 2544 "64 bytes" = **FCS í¬í•¨** Layer 2 í”„ë ˆì„ í¬ê¸°
- FRER R-TAG ì¶”ê°€ ì‹œ = **68 bytes** (4 bytes ì¦ê°€)
- ì‘ì€ í”„ë ˆì„ì¼ìˆ˜ë¡ R-TAG ì˜¤ë²„í—¤ë“œ ë¹„ìœ¨ ì¦ê°€
- í•˜ì§€ë§Œ í•˜ë“œì›¨ì–´ ê°€ì† ë•ë¶„ì— ì„±ëŠ¥ ì €í•˜ ë¯¸ë¯¸ ë˜ëŠ” ê°œì„ 
